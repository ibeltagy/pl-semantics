\section{Implicativity}
\label{sec:implicativity}

Implicativity and factivity are concerned with analyzing the truth conditions of
nested propositions \citep{nairn:icos2006}.  
For example, in the premise of the entailment pair shown in example 
\eqref{ex:imp-fact-nested} below, the {\it locking} is the event that Ed
{\it forgot to} do, meaning that it did not happen.  In example
\eqref{ex:hope-build}, {\it build} is the main verb of the complement of 
{\it hope}, so we cannot infer that the {\it building} event occurred, nor 
can we infer that it did not occur.  Correctly recognizing nested
propositions and analyzing their contexts is necessary for preventing
the licensing of entailments like \eqref{ex:imp-fact-nested} and rejecting those
like \eqref{ex:hope-build}.

\entpairex{ex:imp-fact-nested}{Ed forgot to lock the door.\footnote{Example
\eqref{ex:imp-fact-nested} is derived from examples by \citet{maccartney:iwcs2009}.}}
{Ed did not lock the door.}

\entpairex{ex:hope-build}{The mayor hoped to build a new
stadium.\footnote{Example \eqref{ex:hope-build} is adapted from document
wsj\_0126 from the Penn Treebank.}}{*The mayor built a new stadium.}


\citet{nairn:icos2006} presented an approach to the treatment of inferences
involving implicatives and factives.  Their approach identifies an ``implication
signature'' for every implicative or factive verb.  This signature specifies the
truth conditions for the verb's nested proposition, depending on whether the verb 
occurs in a positive or  negative environment.  Following 
\citet{maccartney:iwcs2009}, we write implication signatures as ``$x/y$'' where 
$x$ represents the entailment to which the speaker commits in a positive environment 
and $y$ represents entailment in a negative environment.  Both $x$ and $y$ have three
possible values: ``+'' for positive entailment, meaning the nested proposition
is entailed, ``-'' for negative entailment, meaning the negation of the
proposition is entailed, and ``o'' for ``null'' entailment, meaning that neither
the proposition nor its negation is entailed. Figure \ref{fig:imp-sig} gives
concrete examples.\footnote{Note that {\it forget to} and {\it forget that} have
different implication signatures.  As such, in order to select the right
signature, it is necessary to examine not simply the verb but the entire
subcategorization frame.  To do this, we make use of the dependency parse
generated by the C\&C parser that is input to Boxer.}

% For example, the verb ``managed to'' has positive entailment in the {\it true}
% case and negative entailment under negation.  So, {\it he managed to escape
% $\vDash$ he escaped} while {\it he did not manage to escape $\vDash$ he did not
% escape}.  On the other hand, the verb ``refused to'' has negative entailment
% in the positive case and ``null'' entailment under negation.  So, {\it he
% refused to fight $\vDash$ he did not fight} but {\it he did not refuse to fight}
% entails neither {\it he fought} nor {\it he did not fight}.

\begin{figure}
\begin{center}
  \begin{tabular}{l c l}
    \hline
   	 & ~~~~~~signature~~~~~~ &  \multicolumn{1}{c}{example} \\
   	\hline
%    	admitted that    & +/+ & he admitted that he knew $\vDash$ he knew \\
%    	                 &     & he did not admit that he knew $\vDash$ he knew \\
%    	\hline
   	forgot that      & +/+ & he forgot that Dave left $\vDash$ Dave left \\
   	                 &     & he did not forget that Dave left $\vDash$ Dave left \\
   	\hline
%    	pretended that   & -/- & he pretended he was sick $\vDash$ he was not sick \\
%    	                 &     & he did not pretend he was sick $\vDash$ he was not sick\\
%    	\hline
%    	wanted to        & o/o & he wanted to fly $?$ he flew \\  
%    	                 &     & he did not want to fly $?$ he flew \\
%    	\hline
   	managed to       & +/- & he managed to escape $\vDash$ he escaped \\
   	                 &     & he did not manage to escape $\vDash$ he did not escape \\
   	\hline
%    	was forced to    & +/o & he was forced to sell $\vDash$ he sold \\
%    	                 &     & he was not forced to sell $?$ he sold \\
%    	\hline
%    	was permitted to & o/- & he was permitted to leave $?$ he left \\
%    	                 &     & he was not permitted to leave $\vDash$ he did not leave \\
%    	\hline
   	forgot to        & -/+ & he forgot to pay $\vDash$ he did not pay \\
   	                 &     & he did not forget to pay $\vDash$ he paid \\
   	\hline
   	refused to       & -/o & he refused to fight $\vDash$ he did not fight \\
   	                 &     & he did not refuse to fight $\nvDash$ \{he fought, he did not fight\} \\
   	\hline
%    	hesitated to     & o/+ & he hesitated to ask $?$ he asked\\
%    	                 &     & he did not hesitate to ask $\vDash$ he asked \\
%    	\hline
  \end{tabular}
\end{center}
\caption{Implication Signatures}
\label{fig:imp-sig}
\end{figure}

\subsection*{Inferences with nested propositions}

The standard conversion from DRT to first-order logic (FOL) (the one used by
Boxer) falls short in its analysis of nested propositions.  Consider the
entailment pair ``John did not manage to leave'' and ``John left''.  The DRT
interpretation of the premise and its corresponding FOL conversion are 
shown in Figure \ref{drs:impl-1}.

\begin{figure}
  \centering
  \subfloat[DRT interpretation]{\label{drs:impl-1-drt}
    \begin{minipage}[c][1.0\width]{0.4\textwidth}
	  %\centering
		\drs{~x0~}{
		  ~\pred{john}{1001}(x0)~ \\
		  \negdrs{~e1 p2~}{
		    ~\pred{manage}{1004}(e1)~ \\
		    ~theme(e1, p2)~ \\
		    ~agent(e1, x0)~ \\
		    ~p2:~\drs{~e3~}{
		      ~\pred{leave}{1006}(e3)~ \\
		      ~agent(e3, x0)~
		    }
		  }
		}
    \end{minipage}
  }
  ~~~
  \subfloat[FOL translation]{\label{drs:impl-1-fol}
    \begin{minipage}[c][1.0\width]{0.4\textwidth}
	  %\centering
	    \begin{align*}
	      & \exists~ x0.[~
	          \pred{john}{1001}(x0) ~\& \\
	      &   \hspace{22px} \lnot \exists~ e1 p2.[~
	                          \pred{manage}{1004}(e1) ~\& \\
	      &     \hspace{59px} theme(e1, p2) ~\& \\
	      &     \hspace{59px} agent(e1, x0) ~\& \\
	      &     \hspace{59px} \exists~ e3.[~
	                            \pred{leave}{1006}(e3) ~\& \\
	      &       \hspace{81px} agent(e3, x0) ]]]
	    \end{align*}
    \end{minipage}
  }
  \caption{Boxer's DRT interpretation of ``John did not manage to leave.''}
  \label{drs:impl-1}
\end{figure}

It should be clear that ``John did not manage to leave'' does {\it not} entail
``John left'' (and, in fact, entails the opposite).  Unfortunately, the FOL
formula shown in Figure \ref{drs:impl-1-fol} {\it does} entail the FOL
representation of ``John left'', which is \[ \exists~
x0~e1.[\pred{john}{1001}(x0) ~\&~ \pred{leave}{1006}(e1) ~\&~ agent(e1, x0)] \]

The incorrect inference occurs here because the standard DRT-to-FOL translation
loses some information.  DRT expressions are allowed to have {\it labeled
subexpressions}, such as $p2$ in Figure \ref{drs:impl-1-drt} that is used to
reference the {\it theme} of the {\it manage} event: the {\it leave} event.  The
FOL expression, on the other hand, shows that $p2$ is the theme of event $e1$,
but has no way of stating what $p2$ refers to.

In order to capture the information that the DRT labels provide, we modify the
DRT expression to contain explicit {\it subexpression triggers}.  That is, for a
sub-DRS $A$ labeled by $p$, we replace $A$ with two new expressions in the same
scope: $\POSPRED{p} \to A$ and $\NEGPRED{p} \to \lnot A$.  The result of such a
replacement on the DRS in Figure \ref{drs:impl-1-drt} can be see in Figure
\ref{drs:impl-2-drt}.   

\begin{figure}[t]
  \centering
  \subfloat[DRT interpretation with subexpression triggers]{\label{drs:impl-2-drt}
    \begin{minipage}[c][1.6\width]{0.4\textwidth}
	  \centering
		\drs{~x0~}{
		  ~\pred{john}{1001}(x0)~ \\
		  ~\drs{~p2~}{
		    ~\negdrs{~e1~}{
		      ~\pred{manage}{1004}(e1)~ \\
		      ~theme(e1, p2)~ \\
		      ~agent(e1, x0)~} \\
		    \unboxedifdrs{\POSPRED{p2}}{   \drs{~e3~}{~\pred{leave}{1006}(e3)~ \\ ~agent(e3, x0)~}} \\
		    \unboxedifdrs{\NEGPRED{p2}}{\negdrs{~e3~}{~\pred{leave}{1006}(e3)~ \\ ~agent(e3, x0)~}}
		  }
		}
    \end{minipage}
  }
  ~~~~~~~~~
  \subfloat[Subexpression-triggering inference rules for implicative ``manage
            to'' with signature +/-]{\label{drs:impl-2-rules} 
    \begin{minipage}[c][1.6\width]{0.4\textwidth}
	  \centering
	    \shortstack{
	      \unboxedifdrs{\drs{~p~}{~   \drs{~e~}{~\pred{manage}{1004}(e)~ \\ ~theme(e, p)~}~}}{\POSPRED{p}} \\
	      \\\\\\\\\\\\
	      \unboxedifdrs{\drs{~p~}{~\negdrs{~e~}{~\pred{manage}{1004}(e)~ \\ ~theme(e, p)~}~}}{\NEGPRED{p}}
	    }
    \end{minipage}
  }
  \caption{First (insufficient) attempt at correcting for the loss of labeled
  sub-expression information.}
  \label{drs:impl-2}
\end{figure}

Now that our labeled subexpression has triggers, we can introduce inference
rules to activate those triggers.  The purpose of these inference rules is to
capture the behavior dictated by the implication signature of the implicative or factive
verb for which the relevant subexpression is the theme.  For example, according
to the implication signature in Figure \ref{fig:imp-sig}, the implicative {\it
manage to} is positively entailing in positive contexts and negatively entailing in negative contexts.
This means that if John {\it managed to} do what is described by $p$, then the
event described by $p$ occurred, or in other words, the subexpression of $p$ is
{\it true}. Likewise, if John {\it did not manage to} do what is described by
$p$, then the event described by $p$ {\it did not} occur, meaning that the
subexpression of $p$ is {\it false}.  

The triggering inference rules for {\it managed to} are shown in Figure
\ref{drs:impl-2-rules}.  The first rule, for positive contexts, says that for
all propositions $p$, if $p$ is ``managed'', then $p$'s subexpression is {\it
true}, so trigger the ``positive entailment'' subexpression which, in our
example, says that the {\it leaving} event occurred.  The second rule, for
negative contexts, says that for all propositions $p$, if there is {\it no}
``managing'' of $p$, then $p$'s subexpression is {\it false}, so trigger the
``negative entailment'' subexpression to say that there is {\it no} event of
{\it leaving}.

While this approach works for positive contexts, there is a subtle problem for
negative contexts.  The negative context rule in Figure \ref{drs:impl-2-rules}
can be translated to FOL as \[ \forall~ p.[~ \lnot \exists~ e.[~ \pred{manage}{1004}(e) 
\land theme(e,p)) ~] \to \NEGPRED{p} ~] \] This expression is stating that for all
propositions $p$, $p$ is {\it false} if there is no ``managing'' of $p$.  Now,
we want this inference rule to be used in cases where it is stated that
``managing'' did not occur, such as in the expression of Figure
\ref{drs:impl-2-drt}, where we see that is is the case that \[ ~\negdrs{~e1~}{ 
~\pred{manage}{1004}(e1)~ \\ ~theme(e1, p2)~ \\ ~agent(e1, x0)~} \] which is
equivalent to the FOL expression \[ \lnot \exists~ e1 ~[~ 
\pred{manage}{1004}(e1) \land theme(e1, p2) \land agent(e1, x0) ~] \] 
stating that there is no ``managing''
of $p2$ by $x0$.  However, the antecedent of our negative context rule states
that there is {\it no} ``managing'' of the proposition, so the rule would only
be used if it could be proven that there is no ``managing'' event at all.
Unfortunately, stating that $p2$ is not ``managed'' {\it by x0} does {\it not}
entail that $p2$ is not ``managed'' at all since $p2$ could be managed by
someone other than $x0$.

To overcome this problem, we modify our representation of a negated event. 
Instead of representing an event, such as the ``managing'' event, that
{\it did not} occur as $\lnot \exists~ e.[~ manage(e) ~]$, we represent it
explicitly as an event of {\it non-occurrence}: $\exists~ e.[~
\textbf{not\_}manage(e) ~]$.  Applying this change to the DRS and inference
rules in Figure \ref{drs:impl-2}, we arrive at our final form in Figure
\ref{drs:impl-3}.

\begin{figure}
  \centering
  \subfloat[DRT interpretation with subexpression triggers]{\label{drs:impl-3-drt}
    \begin{minipage}[c][1.8\width]{0.4\textwidth}
      \centering
		\drs{~x0~}{
		  ~\pred{john}{1001}(x0)~ \\
		  ~\drs{~e1 p2~}{
		    ~\pred{\textbf{not\_}manage}{1004}(e1)~ \\
		    ~theme(e1, p2)~ \\
		    \negdrs{ }{~agent(e1, x0)~} \\
		    \unboxedifdrs{\POSPRED{p2}}{\drs{~e3~}{~\pred{              leave}{1006}(e3)~ \\ ~agent(e3, x0)~}} \\
		    \unboxedifdrs{\NEGPRED{p2}}{\drs{~e3~}{~\pred{\textbf{not\_}leave}{1006}(e3)~ \\ \negdrs{ }{~agent(e3, x0)~}}} }
		}
    \end{minipage}
  }
  ~~~~~~~~~
  \subfloat[Subexpression-triggering inference rules for implicative ``manage
            to'' with signature +/-]{\label{drs:impl-3-rules}
    \begin{minipage}[c][1.8\width]{0.4\textwidth}
	  \centering
	    \shortstack{
	      \unboxedifdrs{\drs{~p~}{~\drs{~e~}{~              \pred{manage}{1004}(e)~ \\ ~theme(e, p)~}~}}{\POSPRED{p}} \\
	      \\\\\\\\\\\\
	      \unboxedifdrs{\drs{~p~}{~\drs{~e~}{~\textbf{not\_}\pred{manage}{1004}(e)~ \\ ~theme(e, p)~}~}}{\NEGPRED{p}}
	    }
    \end{minipage}
  }
  \caption{Explicit capturing of sub-expression information.}
  \label{drs:impl-3}
\end{figure}

Using this strategy, we can see that the negative context rule is active when
there exists a ``not-managing'' state, and the representation of ``John did
not manage to leave'' explicitly requires that there is such an state, meaning
that the rule will be used in the inference.  With all of these pieces in place,
the inference works as expected.

Thus, we transform the output of Boxer in two ways.  First, we identify any
labeled propositions and replace them with pairs of proposition triggers.  Then,
we modify any negated DRSs by extracting the verb and theme atoms, changing the
verb predicate to a ``not\_'' predicate\footnote{The lexical mapping for these new
  predicates ignores the negation, i.e.\ $\ell(\mathrm{not\_manage}) = \ell(\mathrm{manage})$.}, and finally ensuring that all other
expressions under the negated DRS (aside from the labeled proposition itself),
remain under a negated DRS.

Once the sentence representations have been modified, we generate inference
rules for each implicative verb.  If the verb is positively entailing in
positive contexts, we generate a rule of the form 
\[ \forall~ p.[~ \exists~ e.[~ \langle verb \rangle(e) \land theme(e,p)) ~] \to \POSPRED{p} ~] \]
but if it is negatively entailing in positive contexts, we instead generate a rule of the form
\[ \forall~ p.[~ \exists~ e.[~ \langle verb \rangle(e) \land theme(e,p)) ~] \to \NEGPRED{p} ~] \]
If the verb is positively entailing in {\it negative} contexts, we generate a rule of the form
\[ \forall~ p.[~ \exists~ e.[~ \textbf{not\_}\langle verb \rangle(e) \land theme(e,p)) ~] \to \POSPRED{p} ~] \]
but if it is negatively entailing in negative contexts, we instead generate a rule of the form
\[ \forall~ p.[~ \exists~ e.[~ \textbf{not\_}\langle verb \rangle(e) \land theme(e,p)) ~] \to \NEGPRED{p} ~] \]
If the verb is non-entailing in either positive or negative contexts, then we do
not generate a rule for that context polarity. 

This approach works for arbitrarily long chains of nested implicatives and
factives.
For example, consider the entailment in \eqref{ex:imp-long-nested}.
\begin{covex}\label{ex:imp-long-nested}
  Dave managed to fail to not forget to leave $\vDash$ Dave did not leave
\end{covex}
Our approach is able to predict this entailment by correctly handling the three
nested implicatives along with the negation. Figure \ref{fig:imp-fact-nested} 
shows the nested polarity environments and how the implicative verbs and negations 
modify the polarity.  The top-level verb {\it managed to} maintains its same 
polarity and predicts a positive environment for the {\it fail to} event.  The 
{\it fail to} reverses the polarity for the {\it not forget to} state.  Since
the negation of {\it forget} is in a negative environment, the negations cancel,
putting {\it forget} in a positive environment, thus predicting a
negative environment for the {\it leaving} event.  Since the {\it leaving} event
is in a negative environment, we can say that the sentence entails that the 
leaving did not occur.
\begin{figure}
\centering{
~
\xymatrix@C=-1px@R=-3px{
+& & & & & & & & & & & & & & & & & & \\
 & & & & & &+& & & & & & & & & & & & \\
 & & & & & & & & &-& & & & & & & & & \\
 & & & & & & & & & & & &+& & & & & & \\
 & & & & & & & & & & & & & & &-& & & \\
&*++[o][F-]{\text{Dave}}       \ar[rrr] &&&
 *++[o][F-]{\text{managed to}} \ar[rrr] &&&
 *++[o][F-]{\text{fail to}}    \ar[rrr] &&&
 *++[o][F-]{\text{not}}        \ar[rrr] &&&
 *++[o][F-]{\text{forget to}}  \ar[rrr] &&&
 *++[o][F-]{\text{leave}} \\
 & & & & & & & & & & & & & & & & & & & & & \\
 & & & & & & & & & & & & & & & & & & & & & \\
 & & & & & & & & & & & & & & & & & & & & & \\
 & & & & & & & & & & & & & & & & & & & & & \\
 & & & & & & & & & & & & & & & & & & & & & \\
\save "1,1"."11,22"*[F-]\frm{}\restore
\save "2,7"."10,21"*[F-]\frm{}\restore
\save "3,10"."9,20"*[F-]\frm{}\restore
\save "4,13"."8,19"*[F-]\frm{}\restore
\save "5,16"."7,18"*[F-]\frm{}\restore
}
}
\caption{Nested polarity environments showing how implicative verbs and
negation modify polarity.}
\label{fig:imp-fact-nested}
\end{figure}



% \subsection*{Use of subcategorization frame}
% 
% The the verb {\it forget} has different implicative properties depending on its
% subcategorization frame.  When used as {\it forget that}, as in ``He forgot that
% Dave left'', it is positively entailing in both positive and negative contexts. 
% When used as {\it forget to}, as in ``He forgot to lock the door'', it is
% negatively entailing in positive contexts and positively entailing in negative
% contexts.
% 
% In order to generate the correct inference rules, the right implication
% signature must be selected.  To do this, we make use of the dependency parse
% generated by the C\&C parser that is input to Boxer.  The parse tells us which
% version of the verb is being used.  In our example ``He forgot that
% Dave left'', {\it forgot} has a ``ccomp'' relationship to the {\it left}, while
% in ``He forgot to lock the door'', {\it forgot} has a ``xcomp+to'' relationship
% to {\it lock}.


\subsection*{Interaction with other phenomena}

% Some natural language phenomena are most naturally treated as categorial, while
% others are more naturally treated using weights or probabilities. In this paper,
% we treat implicativity, while using a probabilistic approach to word meaning.

\citet{maccartney:iwcs2009} extended the work by \citet{nairn:icos2006} in order
to correctly treat inference involving monotonicity and exclusion. Our approach 
to implicativity and factivity combines naturally with hypernymy to ensure
correct entailment judgements. For example, no additional work is required to
license the entailments in \eqref{ex:imp-fact-hyper}.
\begin{covex}\label{ex:imp-fact-hyper}
\begin{itemize} %\itemsep -3pt
  \item[(a)]~John refused to dance $\vDash$ John didn't tango
  \item[(b)]~John did not forget to tango $\vDash$ John danced
\end{itemize}
\end{covex}

Likewise, no further work is needed for our implicativity and factivity approach to interact
correctly with our approach to ambiguity in word meaning.  For example, consider
example \eqref{ex:imp-fact-syn}.  Here the premise contains the verb {\it prevent}
in a positive context, which is negatively entailing.  It also contains the word
{\it leave} which is synonymous with both {\it result in} and {\it flee} through
different senses.  As the example shows, our approach is able to correctly
handle the interaction between the lexical ambiguity and the implicative verb.

\begin{covex}\label{ex:imp-fact-syn}
\begin{itemize} \itemsep -1pt
  \item[{\it p:}]~~    He prevented the spill from leaving a stain.
  \item[{\it h1:}]~~~~The spill did not result in a stain.
  \item[{\it h2*:}]~~~~The spill did not flee a stain.
  \item[{\it h3*:}]~~~~The spill resulted in a stain.
\end{itemize}
\end{covex}

In example \eqref{ex:imp-fact-syn-null}, the {\it prevent} event is nested under
the null-entailing verb {\it try}.  As such, neither alternate sense of {\it
leave} is entailed since {\it try} says nothing about the truth or falsity of
its nested proposition.

\begin{covex}\label{ex:imp-fact-syn-null}
\begin{itemize} \itemsep -1pt
  \item[{\it p:}]~~    He tried to prevent the spill from leaving a stain.
  \item[{\it h1*:}]~~~~The spill did not result in a stain.
  \item[{\it h2*:}]~~~~The spill did not flee a stain.
  \item[{\it h3*:}]~~~~The spill resulted in a stain.
\end{itemize}
\end{covex}
  

% Example \eqref{ex:ws-imp-2} demonstrates how our system combines
% categorial implicativity with a probabilistic approach to hypernymy.  
% The verb ``anticipate that'' is positively entailing in the negative
% environment.
% The verb ``moderate'' can mean ``chair'' as in ``chair a discussion'' or
% ``curb'' as in ``curb spending''.  Since ``restrain'' is a hypernym of
% ``curb'', it receives a weight based on the applicability of the word ``curb''
% in the context.  Similarly, ``talk'' receives a weight based on its
% hyponym ``chair''. Since our model predicts ``curb'' to be a more probable
% paraphrase of ``moderate'' in this context than ``chair'' (even though the
% priors according to WordNet are reversed), the system is able to infer
% $h_{good}$ while rejecting $h_{bad}$.
% 
% \begin{covex}\label{ex:ws-imp-2}
% \begin{itemize}
%   \item[$p$:] He did not anticipate that inflation would moderate this year
%   \item[$h_{good}$:] Inflation {\bf restrained} this year
%   \item[$h_{bad}$:] Inflation {\bf talked} this year
% \end{itemize} 
% \end{covex}

% According to \citet{nairn:icos2006}, the verb ``predict that'' is a positively
% entailing factive, but if \eqref{ex:ws-imp-2} is modified so that ``anticipate''
% is replaced by ``predict'', Boxer produces a DRS without a nested proposition
% for ``moderate'', meaning that it is not possible to analyze ``predict that'' as
% a factive and preventing our system from licensing the entailment. 



